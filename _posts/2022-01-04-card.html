---
title: Business card
subtitle: Fluid simulation
author: David A Roberts
image: /img/card-back.svg
bg: white
abstract: A self-contained version of <a href="/post/fluid">my tiny fluid simulation</a>, compressed to fit on the back of a business card.
layout: texify
headerstyle: "background: linear-gradient(rgba(32,32,32,0.5), rgba(32,32,32,0.9)), url(/img/fluid.png);"
---

<!--
<figure style="box-shadow:0 3px 10px rgba(0,0,0,0.2)">
<div class="embed-16-9"><iframe src="https://player.vimeo.com/video/660348787?autoplay=1&loop=1&muted=1" width="640" height="360" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe></div>
</figure>

<figure style="box-shadow:0 3px 10px rgba(0,0,0,0.2)">
<img src="/img/card-back.svg" style="width:100%">
</figure>
-->

<!--if(!g.getShaderParameter(S,g.COMPILE_STATUS)) console.warn(`%23version 300 es\n`+s+`\n`+g.getShaderInfoLog(S))-->

<figure>
<div class="embed-16-9"><iframe width=600 height=300 src='
data:text/html,<body onload="i=2;t=35632;c.width=W=innerWidth;c
.height=H=innerHeight;for(k in g=c.getContext`webgl2`)g[k.split
(/(^.|[^a-z])/).map(s=>s[0]).join``]=g[k];with(g){P=crPr();for(
e of geSuEx())geEx(e);h=`%23version 300 es\nint k;`;C=s=>shSo(S
=crSh(t++),h+s)|coSh(S)|atSh(P,S);f=36160;for(X=[],B=[];i-->0;)
biTe(x=3553,X[i]=crTe())|biFr(f,B[i]=crFr())|teIm2D(x,0,34836,W
,H,0,6408,5126,c)|frTe2D(f,36064,x,X[i],0);C(`out highp vec4 O;
uniform sampler2D B;uniform int F;void main(){O-=O;highp vec2 u
\n%23define A texelFetch(B,ivec2(i+u).yx,0)\n=gl_FragCoord.yx,v
,i;for(k=169;k-->0;O+=vec4(0,v-i+v-v*A.w,1)*A.w/3.142/exp(dot(v
,v)))i=vec2(k/13,k%2513)-6.,v=i+A.yz;O.yz/=O.w+1e-6;F%25500<2?O
+=vec4(0,u/1e3-${H}./2e3,.3):O;}`);C`void main(){k=gl_VertexID;
gl_Position.xy=vec2(k*4&4,k*2&4)-1.;}`;R=b=>biFr(f,b)|biTe(x,X[
i%2])|geMi(x)|un1i(geUnLo(P,`F`),i)|drAr(4,0,3);liPr(P);usPr(P)
}setInterval`R(B[i++%2])|R()`" style=margin:0><canvas id=c>
'></iframe></div>
</figure>
